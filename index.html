<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Dokumentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'roboto-mono': ['Roboto Mono', 'monospace']
                    }
                }
            }
        }
    </script>
    
    <style>
        .section-highlight {
            animation: highlightPulse 2s ease-in-out;
        }
        
        @keyframes highlightPulse {
            0% { background-color: transparent; }
            25% { background-color: rgba(59, 130, 246, 0.1); }
            75% { background-color: rgba(59, 130, 246, 0.1); }
            100% { background-color: transparent; }
        }
        
        .dark .section-highlight {
            animation: highlightPulseDark 2s ease-in-out;
        }
        
        @keyframes highlightPulseDark {
            0% { background-color: transparent; }
            25% { background-color: rgba(147, 197, 253, 0.1); }
            75% { background-color: rgba(147, 197, 253, 0.1); }
            100% { background-color: transparent; }
        }
        
        .contents-list a.active {
            background-color: #3b82f6;
            color: white;
        }
        
        .dark .contents-list a.active {
            background-color: #60a5fa;
            color: #1f2937;
        }

        .sql-table {
            border-collapse: collapse;
            width: 100%;
        }
        
        .sql-table th {
            background-color: #3b82f6;
            color: white;
            padding: 8px;
            text-align: left;
        }
        
        .dark .sql-table th {
            background-color: #1e40af;
        }
        
        .sql-table td {
            border: 1px solid #e5e7eb;
            padding: 8px;
        }
        
        .dark .sql-table td {
            border-color: #4b5563;
        }
        
        .sql-table tr:nth-child(even) {
            background-color: #f9fafb;
        }
        
        .dark .sql-table tr:nth-child(even) {
            background-color: #1f2937;
        }

        #sql-input {
            tab-size: 4;
            -moz-tab-size: 4;
            line-height: 1.5;
        }

        .db-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
            background-color: #3b82f6;
            color: white;
        }

        .dark .db-badge {
            background-color: #60a5fa;
            color: #1f2937;
        }
        
        /* Scroll to Top Button */
        #back-to-top {
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        #back-to-top.opacity-0 {
            visibility: hidden;
        }
        
        #back-to-top.opacity-100 {
            visibility: visible;
        }

        /* Autocomplete Dropdown */
        .autocomplete-dropdown {
            position: absolute;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .dark .autocomplete-dropdown {
            background: #374151;
            border-color: #4b5563;
        }

        .autocomplete-item {
            padding: 8px 12px;
            cursor: pointer;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.875rem;
        }

        .autocomplete-item:hover,
        .autocomplete-item.selected {
            background-color: #3b82f6;
            color: white;
        }

        .dark .autocomplete-item:hover,
        .dark .autocomplete-item.selected {
            background-color: #60a5fa;
            color: #1f2937;
        }

        .autocomplete-keyword {
            color: #3b82f6;
            font-weight: 600;
        }

        .dark .autocomplete-keyword {
            color: #60a5fa;
        }

        .autocomplete-table {
            color: #059669;
        }

        .dark .autocomplete-table {
            color: #34d399;
        }

        #sql-input-container {
            position: relative;
        }
        
        /* Responsive Styles */
        @media (max-width: 1024px) {
            .content {
                margin-left: 0 !important;
            }
        }
        
        @media (max-width: 768px) {
            /* Mobile Anpassungen */
            .content {
                padding: 1rem !important;
            }
            
            .content h1 {
                font-size: 2rem !important;
            }
            
            .content h2 {
                font-size: 1.5rem !important;
            }
            
            .content h3 {
                font-size: 1.25rem !important;
            }
            
            /* Code-Bl√∂cke responsive */
            pre {
                font-size: 0.75rem !important;
                padding: 0.75rem !important;
                overflow-x: auto;
            }
            
            code {
                font-size: 0.75rem !important;
            }
            
            /* Buttons kleiner auf Mobile */
            #theme-toggle,
            #sidebar-toggle {
                padding: 0.5rem !important;
                top: 0.5rem !important;
            }
            
            #theme-toggle {
                right: 0.5rem !important;
            }
            
            #sidebar-toggle {
                left: 0.5rem !important;
            }
            
            /* Tabellen horizontal scrollbar */
            .sql-table {
                font-size: 0.75rem;
            }
            
            .overflow-x-auto {
                -webkit-overflow-scrolling: touch;
            }
            
            /* Grid anpassen */
            .grid.grid-cols-1.md\\:grid-cols-2 {
                grid-template-columns: 1fr !important;
            }
            
            /* Sidebar auf Mobile */
            .sidebar {
                width: 80vw !important;
                max-width: 300px;
            }
            
            /* Buttons im Playground responsive */
            .flex.flex-wrap.gap-2.mb-4 button {
                flex: 1 1 auto;
                min-width: 150px;
                justify-content: center;
            }
            
            /* Icons in Buttons zentrieren */
            .flex.items-center.material-icons {
                margin-right: 0.5rem;
            }
        }
        
        @media (max-width: 480px) {
            /* Extra kleine Screens */
            .content h1 {
                font-size: 1.75rem !important;
            }
            
            .content h2 {
                font-size: 1.25rem !important;
            }
            
            .sidebar {
                width: 85vw !important;
            }
            
            /* Noch kleinere Code-Bl√∂cke */
            pre {
                font-size: 0.7rem !important;
            }
            
            /* Inputs volle Breite */
            #sql-input {
                height: 200px !important;
            }
            
            /* Buttons stapeln auf sehr kleinen Screens */
            .flex.flex-wrap.gap-2.mb-4 {
                flex-direction: column !important;
            }
            
            .flex.flex-wrap.gap-2.mb-4 button {
                width: 100% !important;
                min-width: unset !important;
            }
            
            /* Beispiel-Karten */
            .example-btn {
                padding: 0.75rem !important;
            }
            
            /* Kleinere Badges */
            .bg-indigo-500.w-8.h-8,
            .bg-green-500.w-8.h-8,
            .bg-yellow-500.w-8.h-8,
            .bg-purple-500.w-8.h-8,
            .bg-orange-500.w-8.h-8,
            .bg-red-500.w-8.h-8,
            .bg-pink-500.w-8.h-8 {
                width: 1.5rem !important;
                height: 1.5rem !important;
                font-size: 0.75rem !important;
            }
            
            /* Select und Badge responsive */
            #db-select {
                font-size: 0.75rem !important;
                padding: 0.5rem !important;
            }
            
            .db-badge {
                font-size: 0.75rem !important;
                padding: 0.25rem 0.5rem !important;
            }
        }
        
        @media (min-width: 640px) and (max-width: 1024px) {
            /* Tablet Styles */
            .content {
                padding: 2rem !important;
            }
            
            .sidebar {
                width: 300px !important;
            }
            
            /* Gr√∂√üere Touch-Targets auf Tablets */
            .contents-list a {
                padding: 0.75rem !important;
                min-height: 44px;
            }
            
            button {
                min-height: 44px;
            }
        }
        
        /* Touch-optimiert f√ºr alle Touch-Ger√§te */
        @media (hover: none) and (pointer: coarse) {
            /* Gr√∂√üere Touch-Targets */
            .contents-list a,
            .example-btn,
            button {
                min-height: 44px;
                min-width: 44px;
            }
            
            /* Entferne Hover-Effekte auf Touch-Ger√§ten */
            .contents-list a:hover {
                transform: scale(1.02);
            }
            
            .example-btn:active,
            button:active {
                transform: scale(0.98);
            }
        }
        
        /* Landscape Mode f√ºr Smartphones */
        @media (max-width: 896px) and (orientation: landscape) {
            .sidebar {
                width: 50vw !important;
                max-width: 350px;
            }
            
            .content {
                padding: 1rem 2rem !important;
            }
        }
        
        /* Burger Menu Transition */
        #sidebar-toggle {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        @media (min-width: 1024px) {
            /* Desktop - Burger Menu komplett verstecken */
            #sidebar-toggle {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <button id="theme-toggle" class="fixed top-4 right-4 z-50 p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
        <span class="material-icons hidden dark:block text-yellow-400">light_mode</span>
        <span class="material-icons block dark:hidden text-gray-700">dark_mode</span>
    </button>

    <main class="flex min-h-screen">
        <aside id="sidebar" class="sidebar fixed top-0 left-0 w-64 h-screen bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 overflow-y-auto z-40 transform -translate-x-full lg:translate-x-0 transition-transform duration-300">
            <div class="p-6">
                <div class="contents-header text-xl font-bold text-gray-900 dark:text-gray-100 mb-6 font-roboto-mono tracking-wide">
                    Inhalt
                </div>
                <ul class="contents-list space-y-2">
                    <li><a href="#uebersicht" class="block py-2 px-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors font-roboto-mono text-sm">√úbersicht</a></li>
                    <li><a href="#create-database" class="block py-2 px-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors font-roboto-mono text-sm">Datenbank anlegen</a></li>
                    <li><a href="#create-table" class="block py-2 px-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors font-roboto-mono text-sm">Tabelle anlegen</a></li>
                    <li><a href="#insert" class="block py-2 px-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors font-roboto-mono text-sm">Datensatz einf√ºgen</a></li>
                    <li><a href="#update" class="block py-2 px-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors font-roboto-mono text-sm">Datensatz aktualisieren</a></li>
                    <li><a href="#delete" class="block py-2 px-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors font-roboto-mono text-sm">Datensatz l√∂schen</a></li>
                    <li><a href="#drop-table" class="block py-2 px-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors font-roboto-mono text-sm">Tabelle l√∂schen</a></li>
                    <li><a href="#playground" class="block py-2 px-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors font-roboto-mono text-sm">Playground</a></li>
                </ul>
            </div>
        </aside>

        <div class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30 hidden" id="sidebar-overlay"></div>

        <button class="lg:hidden fixed top-4 left-4 z-50 p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-300" id="sidebar-toggle">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
        </button>

        <div class="content flex-1 lg:ml-64 p-6 lg:p-8">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">SQL - Tabellen erstellen und l√∂schen</h1>
                <div class="h-1 w-32 bg-gradient-to-r from-blue-600 to-purple-600 rounded mb-4"></div>
            </div>

            <section id="uebersicht" class="mb-10 scroll-mt-16">
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    Was ist der Zweck dieser Seite?
                </h2>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Diese Seite bietet eine Dokumentation der grundlegenden SQL-Befehle f√ºr die Verwaltung von Datenbanken und Tabellen. Dabei wird die Syntax erkl√§rt, praktische Beispiele gezeigt und auf m√∂gliche Gefahren hingewiesen. Im SQL-Playground weiter unten auf der Seite k√∂nnen alle diese Befehle interaktiv ausprobiert werden. 
                </p>
            </section>

            <section id="create-database" class="mb-10 scroll-mt-16">
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    <span class="bg-green-500 w-8 h-8 rounded-lg flex items-center justify-center text-white mr-3 text-sm font-bold">1</span>
                    Datenbank anlegen
                </h2>
                
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-4 mb-3">Allgemeine Erkl√§rung</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Mit dem <code class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">CREATE DATABASE</code> Befehl wird eine neue Datenbank erstellt. 
                    Eine Datenbank kann dabei mehrere Tabellen beinhalten.
                </p>
                
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Syntax:</p>
                    <code class="text-green-600 dark:text-green-400 font-mono">CREATE DATABASE datenbankname;</code>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-6 mb-3">Beispiel</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Erstellung einer Datenbank f√ºr eine Schule:
                </p>
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <code class="text-green-600 dark:text-green-400 font-mono">CREATE DATABASE schule;</code>
                </div>

                <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mt-4">
                    <h4 class="text-lg font-semibold text-red-800 dark:text-red-300 mb-2 flex items-center">
                        <span class="material-icons mr-2">warning</span>
                        Gefahren
                    </h4>
                    <ul class="text-red-700 dark:text-red-300 space-y-1 list-disc list-inside">
                        <li>In den meisten DBMS schl√§gt <code class="font-mono">CREATE DATABASE</code> fehl, wenn der Name bereits existiert ‚Äî es wird normalerweise nicht automatisch √ºberschrieben. (Bei unterst√ºtzten Systemen: <code class="font-mono">CREATE DATABASE IF NOT EXISTS</code>)</li>
                        <li>Fehlende Berechtigungen k√∂nnen zu Fehlern f√ºhren</li>
                        <li>Ung√ºltige oder ungeeignete Namen (z. B. Leerzeichen, Sonderzeichen, Umlaute) sollten vermieden werden</li>
                    </ul>
                </div>
            </section>

            <section id="create-table" class="mb-10 scroll-mt-16">
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    <span class="bg-yellow-500 w-8 h-8 rounded-lg flex items-center justify-center text-white mr-3 text-sm font-bold">2</span>
                    Tabelle anlegen
                </h2>
                
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-4 mb-3">Allgemeine Erkl√§rung</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Mit <code class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">CREATE TABLE</code> wird eine neue Tabelle innerhalb einer Datenbank erstellt. 
                    Dabei werden die Spalten (Felder) und deren Datentypen definiert.
                </p>
                
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Syntax:</p>
                    <pre class="text-green-600 dark:text-green-400 font-mono">CREATE TABLE tabellenname (
    spalte1 DATENTYP,
    spalte2 DATENTYP,
    ...
);</pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-6 mb-3">Beispiel</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Erstellung der Tabelle "Sch√ºler":
                </p>
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <pre class="text-green-600 dark:text-green-400 font-mono">CREATE TABLE schueler (
    id INT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    klasse VARCHAR(255),
    alter INT
);</pre>
                </div>

                <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mt-4">
                    <h4 class="text-lg font-semibold text-red-800 dark:text-red-300 mb-2 flex items-center">
                        <span class="material-icons mr-2">warning</span>
                        Gefahren
                    </h4>
                    <ul class="text-red-700 dark:text-red-300 space-y-1 list-disc list-inside">
                        <li>Falsche Datentypen k√∂nnen zu Fehlern beim Einf√ºgen f√ºhren</li>
                        <li>Fehlende PRIMARY KEY Definition kann Duplikate erm√∂glichen</li>
                        <li><code class="font-mono">CREATE TABLE</code> schl√§gt normalerweise fehl, wenn eine Tabelle mit gleichem Namen existiert ‚Äî vorher <code class="font-mono">DROP</code> oder <code class="font-mono">CREATE TABLE IF NOT EXISTS</code> verwenden</li>
                        <li>NOT NULL Constraints sollten sorgf√§ltig √ºberlegt werden</li>
                        <li>Fehlende Indizes k√∂nnen zu Performance-Problemen f√ºhren</li>
                    </ul>
                </div>
            </section>

            <section id="insert" class="mb-10 scroll-mt-16">
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    <span class="bg-purple-500 w-8 h-8 rounded-lg flex items-center justify-center text-white mr-3 text-sm font-bold">3</span>
                    Datensatz einf√ºgen
                </h2>
                
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-4 mb-3">Allgemeine Erkl√§rung</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Mit <code class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">INSERT INTO</code> werden neue Datens√§tze in eine bestehende Tabelle eingef√ºgt.
                </p>
                
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Syntax:</p>
                    <pre class="text-green-600 dark:text-green-400 font-mono">INSERT INTO tabellenname (spalte1, spalte2, ...)
VALUES (wert1, wert2, ...);</pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-6 mb-3">Beispiel</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Wir f√ºgen einen Sch√ºler in die Tabelle ein:
                </p>
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <pre class="text-green-600 dark:text-green-400 font-mono">INSERT INTO schueler (id, name, klasse, alter)
VALUES (1, 'Max Mustermann', '12a', 17);</pre>
                </div>

                <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mt-4">
                    <h4 class="text-lg font-semibold text-red-800 dark:text-red-300 mb-2 flex items-center">
                        <span class="material-icons mr-2">warning</span>
                        Gefahren
                    </h4>
                    <ul class="text-red-700 dark:text-red-300 space-y-1 list-disc list-inside">
                        <li>Datentyp-Konflikte f√ºhren zu Fehlern (z. B. Text in INT-Spalte)</li>
                        <li>PRIMARY KEY Duplikate werden abgelehnt</li>
                        <li>NOT NULL Spalten m√ºssen Werte erhalten</li>
                        <li>SQL-Injection-Gefahr bei ungefilterten Benutzereingaben</li>
                        <li>Bei <code class="font-mono">INSERT ... SELECT</code> k√∂nnen fehlende Filter zu Masseneinf√ºgungen f√ºhren</li>
                    </ul>
                </div>
            </section>

            <section id="update" class="mb-10 scroll-mt-16">
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    <span class="bg-orange-500 w-8 h-8 rounded-lg flex items-center justify-center text-white mr-3 text-sm font-bold">4</span>
                    Datensatz aktualisieren
                </h2>
                
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-4 mb-3">Allgemeine Erkl√§rung</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Mit <code class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">UPDATE</code> werden bestehende Datens√§tze in einer Tabelle ge√§ndert. 
                    Die WHERE-Klausel bestimmt, welche Datens√§tze aktualisiert werden.
                </p>
                
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Syntax:</p>
                    <pre class="text-green-600 dark:text-green-400 font-mono">UPDATE tabellenname
SET spalte1 = wert1, spalte2 = wert2, ...
WHERE bedingung;</pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-6 mb-3">Beispiel</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Wir √§ndern die Klasse eines Sch√ºlers:
                </p>
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <pre class="text-green-600 dark:text-green-400 font-mono">UPDATE schueler
SET klasse = '12b', alter = 18
WHERE id = 1;</pre>
                </div>

                <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mt-4">
                    <h4 class="text-lg font-semibold text-red-800 dark:text-red-300 mb-2 flex items-center">
                        <span class="material-icons mr-2">warning</span>
                        Gefahren
                    </h4>
                    <ul class="text-red-700 dark:text-red-300 space-y-1 list-disc list-inside">
                        <li><strong>Achtung:</strong> Ohne WHERE-Klausel werden alle Datens√§tze ge√§ndert.</li>
                        <li>Falsche WHERE-Bedingung kann ungewollte Datens√§tze √§ndern</li>
                        <li>Datentyp-Konflikte k√∂nnen auftreten</li>
                        <li>√Ñnderungen sind ohne Transaktionen / Backups schwer r√ºckg√§ngig zu machen ‚Äî nutze <code class="font-mono">TRANSACTION</code> / <code class="font-mono">ROLLBACK</code> wenn m√∂glich</li>
                    </ul>
                </div>
            </section>

            <section id="delete" class="mb-10 scroll-mt-16">
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    <span class="bg-red-500 w-8 h-8 rounded-lg flex items-center justify-center text-white mr-3 text-sm font-bold">5</span>
                    Datensatz l√∂schen
                </h2>
                
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-4 mb-3">Allgemeine Erkl√§rung</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Mit <code class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">DELETE</code> werden Datens√§tze aus einer Tabelle gel√∂scht. 
                    Die WHERE-Klausel ist essentiell, um nur bestimmte Datens√§tze zu l√∂schen.
                </p>
                
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Syntax:</p>
                    <pre class="text-green-600 dark:text-green-400 font-mono">DELETE FROM tabellenname
WHERE bedingung;</pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-6 mb-3">Beispiel</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Wir l√∂schen einen Sch√ºler:
                </p>
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <pre class="text-green-600 dark:text-green-400 font-mono">DELETE FROM schueler
WHERE id = 1;</pre>
                </div>

                <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mt-4">
                    <h4 class="text-lg font-semibold text-red-800 dark:text-red-300 mb-2 flex items-center">
                        <span class="material-icons mr-2">warning</span>
                        Gefahren
                    </h4>
                    <ul class="text-red-700 dark:text-red-300 space-y-1 list-disc list-inside">
                        <li><strong>Achtung:</strong> Ohne WHERE-Klausel werden alle Datens√§tze gel√∂scht.</li>
                        <li>Gel√∂schte Daten sind ohne Backups oder Transaktionen schwer wiederherstellbar</li>
                        <li>Falsche WHERE-Bedingung l√∂scht falsche Datens√§tze</li>
                        <li>Foreign Key Constraints k√∂nnen L√∂schungen verhindern; <code class="font-mono">ON DELETE CASCADE</code> kann dagegen viele verkn√ºpfte Datens√§tze l√∂schen</li>
                    </ul>
                </div>
            </section>

            <section id="drop-table" class="mb-10 scroll-mt-16">
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    <span class="bg-pink-500 w-8 h-8 rounded-lg flex items-center justify-center text-white mr-3 text-sm font-bold">6</span>
                    Tabelle l√∂schen
                </h2>
                
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-4 mb-3">Allgemeine Erkl√§rung</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Mit <code class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">DROP TABLE</code> wird eine komplette Tabelle samt allen Daten aus der Datenbank gel√∂scht.
                </p>
                
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Syntax:</p>
                    <code class="text-green-600 dark:text-green-400 font-mono">DROP TABLE tabellenname;</code>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mt-6 mb-3">Beispiel</h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Wir l√∂schen die gesamte Sch√ºler-Tabelle:
                </p>
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4">
                    <code class="text-green-600 dark:text-green-400 font-mono">DROP TABLE schueler;</code>
                </div>

                <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mt-4">
                    <h4 class="text-lg font-semibold text-red-800 dark:text-red-300 mb-2 flex items-center">
                        <span class="material-icons mr-2">warning</span>
                        Gefahren
                    </h4>
                    <ul class="text-red-700 dark:text-red-300 space-y-1 list-disc list-inside">
                        <li><strong>GR√ñ√üTE GEFAHR:</strong> Kompletter Datenverlust ‚Äî Tabelle und alle Daten sind weg!</li>
                        <li>Keine Wiederherstellung ohne Backup (au√üer spezielle DB-Funktionen wie Recycle/Flashback)</li>
                        <li>Fremdschl√ºssel/Abh√§ngigkeiten k√∂nnen <code class="font-mono">DROP</code> verhindern oder (bei <code class="font-mono">CASCADE</code>) viele verkn√ºpfte Daten l√∂schen</li>
                        <li>SQL-Befehl selbst zeigt keine Dialoge ‚Äî Vorsicht bei Ausf√ºhrung</li>
                    </ul>
                </div>
            </section>

            <section id="playground" class="mb-10 scroll-mt-16">
                <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    <span class="bg-indigo-500 w-8 h-8 rounded-lg flex items-center justify-center text-white mr-3 text-sm font-bold">7</span>
                    SQL Playground
                </h2>
                
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                    Probiere hier selbst SQL-Befehle aus! Deine Datenbanken und Tabellen werden lokal im Browser gespeichert.
                </p>
                
                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-6">
                    <div class="flex items-start">
                        <span class="material-icons text-blue-600 dark:text-blue-400 mr-2 flex-shrink-0">info</span>
                        <div>
                            <h4 class="text-blue-800 dark:text-blue-200 font-medium mb-1">üí° Automatische ID-Generierung</h4>
                            <p class="text-blue-700 dark:text-blue-300 text-sm">
                                Wenn du eine Spalte als <code class="bg-blue-100 dark:bg-blue-800 px-1.5 py-0.5 rounded font-mono">PRIMARY KEY</code> definierst, 
                                wird die ID automatisch inkrementiert. Du musst sie beim INSERT nicht angeben!
                            </p>
                        </div>
                    </div>
                </div>

                <div class="mb-4 flex items-center gap-3 flex-wrap">
                    <label class="text-gray-700 dark:text-gray-300 font-semibold">Aktive Datenbank:</label>
                    <select id="db-select" class="px-4 py-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Keine Datenbank ausgew√§hlt</option>
                    </select>
                    <span id="current-db-badge" class="db-badge hidden"></span>
                </div>

                <div class="mb-4" id="sql-input-container">
                    <label class="block text-gray-700 dark:text-gray-300 font-semibold mb-2">
                        SQL-Befehl eingeben:
                        <span class="text-xs font-normal text-gray-500 dark:text-gray-400 ml-2">(Tab f√ºr Einr√ºckung, Strg+Leertaste f√ºr Vorschl√§ge)</span>
                    </label>
                    <textarea id="sql-input" class="w-full h-48 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical" placeholder="Beispiel:&#10;CREATE DATABASE meine_datenbank;&#10;&#10;CREATE TABLE test (&#10;    id INTEGER PRIMARY KEY,&#10;    name TEXT&#10;);"></textarea>
                    <div id="autocomplete-dropdown" class="autocomplete-dropdown"></div>
                </div>

                <div class="flex flex-wrap gap-2 mb-4">
                    <button id="execute-btn" class="px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors flex items-center">
                        <span class="material-icons mr-2">play_arrow</span>
                        Ausf√ºhren
                    </button>
                    <button id="clear-btn" class="px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-semibold transition-colors flex items-center">
                        <span class="material-icons mr-2">clear</span>
                        Eingabe l√∂schen
                    </button>
                    <button id="format-btn" class="px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-semibold transition-colors flex items-center">
                        <span class="material-icons mr-2">code</span>
                        Formatieren
                    </button>
                    <button id="reset-db-btn" class="px-6 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition-colors flex items-center">
                        <span class="material-icons mr-2">delete_forever</span>
                        Alles zur√ºcksetzen
                    </button>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3">Ausgabe:</h3>
                    <div id="sql-output" class="bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg p-4 min-h-24 font-mono text-sm overflow-x-auto">
                        <span class="text-gray-500 dark:text-gray-400">Bereit f√ºr SQL-Befehle...</span>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3">Datenbank-√úbersicht:</h3>
                    <div id="db-overview" class="bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg p-4">
                        <span class="text-gray-500 dark:text-gray-400">Keine Datenbanken vorhanden</span>
                    </div>
                </div>

                <div class="mt-6">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3">Schnellbeispiele:</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <button class="example-btn text-left p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors" data-sql="CREATE DATABASE schule;">
                            <span class="text-blue-800 dark:text-blue-300 font-semibold block mb-1">Datenbank erstellen</span>
                            <span class="text-xs text-blue-600 dark:text-blue-400">CREATE DATABASE schule;</span>
                        </button>
                        <button class="example-btn text-left p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors" data-sql="CREATE TABLE schueler (&#10;    id INTEGER PRIMARY KEY,&#10;    name TEXT NOT NULL,&#10;    klasse TEXT,&#10;    alter INTEGER&#10;);">
                            <span class="text-green-800 dark:text-green-300 font-semibold block mb-1">Tabelle erstellen</span>
                            <span class="text-xs text-green-600 dark:text-green-400">CREATE TABLE schueler (...)</span>
                        </button>
                        <button class="example-btn text-left p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg hover:bg-yellow-100 dark:hover:bg-yellow-900/30 transition-colors" data-sql="INSERT INTO schueler (name, klasse, alter)&#10;VALUES ('Max Mustermann', '12a', 17);">
                            <span class="text-yellow-800 dark:text-yellow-300 font-semibold block mb-1">Datensatz einf√ºgen (ID automatisch)</span>
                            <span class="text-xs text-yellow-600 dark:text-yellow-400">INSERT INTO schueler (...)</span>
                        </button>
                        <button class="example-btn text-left p-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors" data-sql="SELECT * FROM schueler;">
                            <span class="text-purple-800 dark:text-purple-300 font-semibold block mb-1">Alle Daten anzeigen</span>
                            <span class="text-xs text-purple-600 dark:text-purple-400">SELECT * FROM schueler;</span>
                        </button>
                        <button class="example-btn text-left p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors" data-sql="UPDATE schueler&#10;SET alter = 18&#10;WHERE id = 1;">
                            <span class="text-orange-800 dark:text-orange-300 font-semibold block mb-1">Datensatz aktualisieren</span>
                            <span class="text-xs text-orange-600 dark:text-orange-400">UPDATE schueler SET ...</span>
                        </button>
                        <button class="example-btn text-left p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors" data-sql="DELETE FROM schueler&#10;WHERE id = 1;">
                            <span class="text-red-800 dark:text-red-300 font-semibold block mb-1">Datensatz l√∂schen</span>
                            <span class="text-xs text-red-600 dark:text-red-400">DELETE FROM schueler WHERE ...</span>
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
        // Dark mode
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        const currentTheme = localStorage.getItem('theme') || 'light';
        html.classList.toggle('dark', currentTheme === 'dark');
        themeToggle.addEventListener('click', () => {
            const isDark = html.classList.contains('dark');
            html.classList.toggle('dark', !isDark);
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
        });

        // Sidebar
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        
        sidebarToggle.addEventListener('click', () => {
            const isOpen = !sidebar.classList.contains('-translate-x-full');
            
            if (isOpen) {
                // Schlie√üen
                sidebar.classList.add('-translate-x-full');
                sidebarOverlay.classList.add('hidden');
                sidebarToggle.style.opacity = '1';
                sidebarToggle.style.pointerEvents = 'auto';
            } else {
                // √ñffnen
                sidebar.classList.remove('-translate-x-full');
                sidebarOverlay.classList.remove('hidden');
                sidebarToggle.style.opacity = '0';
                sidebarToggle.style.pointerEvents = 'none';
            }
        });
        
        sidebarOverlay.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
            sidebarOverlay.classList.add('hidden');
            sidebarToggle.style.opacity = '1';
            sidebarToggle.style.pointerEvents = 'auto';
        });
        
        // Sidebar auch beim Klick auf einen Link schlie√üen (Mobile)
        document.querySelectorAll('.contents-list a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 1024) {
                    sidebar.classList.add('-translate-x-full');
                    sidebarOverlay.classList.add('hidden');
                    sidebarToggle.style.opacity = '1';
                    sidebarToggle.style.pointerEvents = 'auto';
                }
            });
        });

        // Scroll
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.contents-list a');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { root: null, rootMargin: '-20% 0px -60% 0px', threshold: 0 });
            sections.forEach(section => observer.observe(section));
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    const targetSection = document.querySelector(targetId);
                    if (targetSection) {
                        targetSection.scrollIntoView({ behavior: 'smooth' });
                        sidebar.classList.add('-translate-x-full');
                        sidebarOverlay.classList.add('hidden');
                    }
                });
            });
        });

        // SQL Database Manager
        class SQLDatabaseManager {
            constructor() {
                const saved = localStorage.getItem('sql-playground-databases');
                this.databases = saved ? JSON.parse(saved) : {};
                this.currentDatabase = localStorage.getItem('sql-current-db') || null;
            }

            save() {
                localStorage.setItem('sql-playground-databases', JSON.stringify(this.databases));
                localStorage.setItem('sql-current-db', this.currentDatabase || '');
            }

            executeSQL(sql) {
                sql = sql.trim().replace(/;$/, '');
                const upper = sql.toUpperCase();
                
                if (upper.startsWith('CREATE DATABASE')) return this.createDatabase(sql);
                if (upper.startsWith('DROP DATABASE')) return this.dropDatabase(sql);
                if (upper.startsWith('USE')) return this.useDatabase(sql);
                if (upper.startsWith('CREATE TABLE')) return this.createTable(sql);
                if (upper.startsWith('INSERT INTO')) return this.insertInto(sql);
                if (upper.startsWith('SELECT')) return this.select(sql);
                if (upper.startsWith('UPDATE')) return this.update(sql);
                if (upper.startsWith('DELETE')) return this.delete(sql);
                if (upper.startsWith('DROP TABLE')) return this.dropTable(sql);
                
                return { success: false, message: 'Unbekannter SQL-Befehl' };
            }

            createDatabase(sql) {
                const match = sql.match(/CREATE DATABASE (\w+)/i);
                if (!match) return { success: false, message: 'Syntax: CREATE DATABASE name' };
                const name = match[1];
                if (this.databases[name]) return { success: false, message: `Datenbank "${name}" existiert bereits` };
                this.databases[name] = { tables: {} };
                this.currentDatabase = name;
                this.save();
                return { success: true, message: `Datenbank "${name}" erstellt und aktiviert` };
            }

            dropDatabase(sql) {
                const match = sql.match(/DROP DATABASE (\w+)/i);
                if (!match) return { success: false, message: 'Syntax: DROP DATABASE name' };
                const name = match[1];
                if (!this.databases[name]) return { success: false, message: `Datenbank "${name}" existiert nicht` };
                delete this.databases[name];
                if (this.currentDatabase === name) this.currentDatabase = null;
                this.save();
                return { success: true, message: `Datenbank "${name}" gel√∂scht` };
            }

            useDatabase(sql) {
                const match = sql.match(/USE (\w+)/i);
                if (!match) return { success: false, message: 'Syntax: USE name' };
                const name = match[1];
                if (!this.databases[name]) return { success: false, message: `Datenbank "${name}" existiert nicht` };
                this.currentDatabase = name;
                this.save();
                return { success: true, message: `Datenbank "${name}" aktiviert` };
            }

            getCurrentDB() {
                return this.currentDatabase ? this.databases[this.currentDatabase] : null;
            }

            createTable(sql) {
                const db = this.getCurrentDB();
                if (!db) return { success: false, message: 'Keine Datenbank ausgew√§hlt. Nutze CREATE DATABASE oder USE.' };
                const match = sql.match(/CREATE TABLE (\w+)\s*\((.*)\)/is);
                if (!match) return { success: false, message: 'Syntax: CREATE TABLE name (...)' };
                const name = match[1];
                if (db.tables[name]) return { success: false, message: `Tabelle "${name}" existiert bereits` };
                const columns = match[2].split(',').map(col => {
                    const parts = col.trim().split(/\s+/);
                    const constraints = parts.slice(2).join(' ').toUpperCase();
                    return { 
                        name: parts[0], 
                        type: parts[1] || 'TEXT', 
                        constraints: constraints,
                        isPrimaryKey: constraints.includes('PRIMARY KEY') || constraints.includes('PRIMARY') && constraints.includes('KEY'),
                        isAutoIncrement: constraints.includes('AUTOINCREMENT') || constraints.includes('AUTO_INCREMENT')
                    };
                });
                db.tables[name] = { 
                    columns, 
                    rows: [],
                    autoIncrementCounters: {} // Speichert Auto-Inkrement-Z√§hler f√ºr jede Spalte
                };
                
                // Initialisiere Auto-Inkrement-Z√§hler f√ºr Primary Key Spalten
                columns.forEach(col => {
                    if (col.isPrimaryKey && (col.isAutoIncrement || col.type.toUpperCase().includes('INTEGER'))) {
                        db.tables[name].autoIncrementCounters[col.name] = 0;
                    }
                });
                
                this.save();
                return { success: true, message: `Tabelle "${name}" erstellt` };
            }

            insertInto(sql) {
                const db = this.getCurrentDB();
                if (!db) return { success: false, message: 'Keine Datenbank ausgew√§hlt' };
                const match = sql.match(/INSERT INTO (\w+)\s*\((.*?)\)\s*VALUES\s*\((.*?)\)/is);
                if (!match) return { success: false, message: 'Syntax: INSERT INTO table (...) VALUES (...)' };
                const [, table, cols, vals] = match;
                if (!db.tables[table]) return { success: false, message: `Tabelle "${table}" nicht gefunden` };
                
                const columnNames = cols.split(',').map(c => c.trim());
                const values = vals.split(',').map(v => v.trim().replace(/^['"]|['"]$/g, ''));
                
                // Finde PRIMARY KEY Spalte
                const tableInfo = db.tables[table];
                const primaryKeyCol = tableInfo.columns.find(col => col.isPrimaryKey);
                
                // Erstelle neues Row-Objekt mit PRIMARY KEY als erster Spalte
                const row = {};
                
                // 1. Setze PRIMARY KEY zuerst (falls vorhanden)
                if (primaryKeyCol) {
                    if (columnNames.includes(primaryKeyCol.name)) {
                        // PRIMARY KEY wurde explizit angegeben
                        const idx = columnNames.indexOf(primaryKeyCol.name);
                        row[primaryKeyCol.name] = values[idx];
                    } else {
                        // Auto-Inkrement f√ºr PRIMARY KEY
                        if (!tableInfo.autoIncrementCounters) {
                            tableInfo.autoIncrementCounters = {};
                        }
                        if (tableInfo.autoIncrementCounters[primaryKeyCol.name] === undefined) {
                            tableInfo.autoIncrementCounters[primaryKeyCol.name] = 0;
                        }
                        tableInfo.autoIncrementCounters[primaryKeyCol.name]++;
                        row[primaryKeyCol.name] = tableInfo.autoIncrementCounters[primaryKeyCol.name];
                    }
                }
                
                // 2. F√ºge restliche Spalten in der Reihenfolge der Tabellendefinition hinzu
                tableInfo.columns.forEach(col => {
                    if (!col.isPrimaryKey && columnNames.includes(col.name)) {
                        const idx = columnNames.indexOf(col.name);
                        row[col.name] = values[idx];
                    }
                });
                
                db.tables[table].rows.push(row);
                this.save();
                return { success: true, message: `Datensatz in "${table}" eingef√ºgt` };
            }

            select(sql) {
                const db = this.getCurrentDB();
                if (!db) return { success: false, message: 'Keine Datenbank ausgew√§hlt' };
                const match = sql.match(/SELECT (.*?) FROM (\w+)(?: WHERE (.*))?/is);
                if (!match) return { success: false, message: 'Syntax: SELECT cols FROM table' };
                const [, cols, table, where] = match;
                if (!db.tables[table]) return { success: false, message: `Tabelle "${table}" nicht gefunden` };
                let rows = db.tables[table].rows;
                if (where) rows = rows.filter(row => this.evalWhere(row, where));
                
                // Bestimme Spalten mit PRIMARY KEY zuerst
                let columns;
                if (cols.trim() === '*') {
                    if (rows.length > 0) {
                        const tableInfo = db.tables[table];
                        const primaryKeyCol = tableInfo.columns.find(col => col.isPrimaryKey);
                        const allColumns = Object.keys(rows[0]);
                        
                        if (primaryKeyCol && allColumns.includes(primaryKeyCol.name)) {
                            // PRIMARY KEY zuerst, dann die anderen in Reihenfolge der Tabellendefinition
                            columns = [primaryKeyCol.name];
                            tableInfo.columns.forEach(col => {
                                if (!col.isPrimaryKey && allColumns.includes(col.name)) {
                                    columns.push(col.name);
                                }
                            });
                        } else {
                            columns = allColumns;
                        }
                    } else {
                        columns = [];
                    }
                } else {
                    columns = cols.split(',').map(c => c.trim());
                }
                
                return { success: true, message: 'Abfrage erfolgreich', data: rows, columns };
            }

            update(sql) {
                const db = this.getCurrentDB();
                if (!db) return { success: false, message: 'Keine Datenbank ausgew√§hlt' };
                const match = sql.match(/UPDATE (\w+)\s+SET (.*?)(?:\s+WHERE (.*))?$/is);
                if (!match) return { success: false, message: 'Syntax: UPDATE table SET ...' };
                const [, table, set, where] = match;
                if (!db.tables[table]) return { success: false, message: `Tabelle "${table}" nicht gefunden` };
                const updates = {};
                set.split(',').forEach(s => {
                    const [col, val] = s.split('=').map(x => x.trim());
                    updates[col] = val.replace(/^['"]|['"]$/g, '');
                });
                let count = 0;
                db.tables[table].rows = db.tables[table].rows.map(row => {
                    if (!where || this.evalWhere(row, where)) {
                        count++;
                        return { ...row, ...updates };
                    }
                    return row;
                });
                this.save();
                return { success: true, message: `${count} Datensatz(e) aktualisiert` };
            }

            delete(sql) {
                const db = this.getCurrentDB();
                if (!db) return { success: false, message: 'Keine Datenbank ausgew√§hlt' };
                const match = sql.match(/DELETE FROM (\w+)(?:\s+WHERE (.*))?/is);
                if (!match) return { success: false, message: 'Syntax: DELETE FROM table' };
                const [, table, where] = match;
                if (!db.tables[table]) return { success: false, message: `Tabelle "${table}" nicht gefunden` };
                const before = db.tables[table].rows.length;
                if (where) {
                    db.tables[table].rows = db.tables[table].rows.filter(row => !this.evalWhere(row, where));
                } else {
                    db.tables[table].rows = [];
                }
                const deleted = before - db.tables[table].rows.length;
                this.save();
                return { success: true, message: `${deleted} Datensatz(e) gel√∂scht` };
            }

            dropTable(sql) {
                const db = this.getCurrentDB();
                if (!db) return { success: false, message: 'Keine Datenbank ausgew√§hlt' };
                const match = sql.match(/DROP TABLE (\w+)/i);
                if (!match) return { success: false, message: 'Syntax: DROP TABLE name' };
                const name = match[1];
                if (!db.tables[name]) return { success: false, message: `Tabelle "${name}" nicht gefunden` };
                delete db.tables[name];
                this.save();
                return { success: true, message: `Tabelle "${name}" gel√∂scht` };
            }

            evalWhere(row, where) {
                const match = where.match(/(\w+)\s*=\s*(.+)/);
                if (!match) return true;
                const [, col, val] = match;
                return String(row[col]) === val.trim().replace(/^['"]|['"]$/g, '');
            }

            reset() {
                this.databases = {};
                this.currentDatabase = null;
                this.save();
            }

            getAllDatabases() {
                return Object.keys(this.databases);
            }

            getOverview() {
                return Object.entries(this.databases).map(([dbName, db]) => ({
                    name: dbName,
                    tables: Object.entries(db.tables).map(([tableName, table]) => ({
                        name: tableName,
                        columns: table.columns.map(c => c.name),
                        rowCount: table.rows.length
                    }))
                }));
            }

            getAllTables() {
                const db = this.getCurrentDB();
                return db ? Object.keys(db.tables) : [];
            }
        }

        const dbManager = new SQLDatabaseManager();

        // Autocomplete System
        class SQLAutocomplete {
            constructor(textarea, dbManager) {
                this.textarea = textarea;
                this.dbManager = dbManager;
                this.dropdown = document.getElementById('autocomplete-dropdown');
                this.suggestions = [];
                this.selectedIndex = -1;
                
                this.keywords = [
                    'SELECT', 'FROM', 'WHERE', 'INSERT INTO', 'VALUES', 'UPDATE', 'SET',
                    'DELETE FROM', 'CREATE TABLE', 'DROP TABLE', 'CREATE DATABASE', 
                    'DROP DATABASE', 'USE', 'PRIMARY KEY', 'NOT NULL', 'INTEGER', 'TEXT',
                    'VARCHAR', 'REAL', 'BLOB', 'AND', 'OR', 'ORDER BY', 'LIMIT', 'DISTINCT'
                ];
                
                this.setupListeners();
            }

            setupListeners() {
                this.textarea.addEventListener('input', () => this.handleInput());
                this.textarea.addEventListener('keydown', (e) => this.handleKeyDown(e));
                document.addEventListener('click', (e) => {
                    if (!this.dropdown.contains(e.target) && e.target !== this.textarea) {
                        this.hide();
                    }
                });
            }

            handleInput() {
                const cursorPos = this.textarea.selectionStart;
                const text = this.textarea.value.substring(0, cursorPos);
                const words = text.split(/\s+/);
                const currentWord = words[words.length - 1];
                
                if (currentWord.length < 2) {
                    this.hide();
                    return;
                }
                
                this.suggestions = this.getSuggestions(currentWord);
                if (this.suggestions.length > 0) {
                    this.show();
                } else {
                    this.hide();
                }
            }

            getSuggestions(word) {
                const upper = word.toUpperCase();
                const suggestions = [];
                
                // Keywords
                this.keywords.forEach(kw => {
                    if (kw.startsWith(upper)) {
                        suggestions.push({ text: kw, type: 'keyword' });
                    }
                });
                
                // Tables
                const tables = this.dbManager.getAllTables();
                tables.forEach(table => {
                    if (table.toUpperCase().startsWith(upper)) {
                        suggestions.push({ text: table, type: 'table' });
                    }
                });
                
                return suggestions.slice(0, 10);
            }

            show() {
                this.dropdown.innerHTML = '';
                this.suggestions.forEach((suggestion, index) => {
                    const item = document.createElement('div');
                    item.className = 'autocomplete-item';
                    if (suggestion.type === 'keyword') {
                        item.innerHTML = `<span class="autocomplete-keyword">${suggestion.text}</span>`;
                    } else if (suggestion.type === 'table') {
                        item.innerHTML = `<span class="autocomplete-table">${suggestion.text}</span> <span style="opacity: 0.6; font-size: 0.75rem;">(Tabelle)</span>`;
                    }
                    item.addEventListener('click', () => this.insertSuggestion(suggestion.text));
                    this.dropdown.appendChild(item);
                });
                
                // Position dropdown
                const rect = this.textarea.getBoundingClientRect();
                const container = document.getElementById('sql-input-container');
                this.dropdown.style.top = (this.textarea.offsetTop + this.textarea.offsetHeight) + 'px';
                this.dropdown.style.left = this.textarea.offsetLeft + 'px';
                this.dropdown.style.width = this.textarea.offsetWidth + 'px';
                this.dropdown.style.display = 'block';
                this.selectedIndex = -1;
            }

            hide() {
                this.dropdown.style.display = 'none';
                this.selectedIndex = -1;
            }

            handleKeyDown(e) {
                if (this.dropdown.style.display === 'none') {
                    // Tab f√ºr Einr√ºckung
                    if (e.key === 'Tab') {
                        e.preventDefault();
                        const start = this.textarea.selectionStart;
                        const end = this.textarea.selectionEnd;
                        const value = this.textarea.value;
                        this.textarea.value = value.substring(0, start) + '    ' + value.substring(end);
                        this.textarea.selectionStart = this.textarea.selectionEnd = start + 4;
                    }
                    // Strg+Leertaste f√ºr Autocomplete
                    else if (e.ctrlKey && e.key === ' ') {
                        e.preventDefault();
                        this.handleInput();
                    }
                    return;
                }
                
                const items = this.dropdown.querySelectorAll('.autocomplete-item');
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    this.selectedIndex = Math.min(this.selectedIndex + 1, items.length - 1);
                    this.updateSelection(items);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    this.selectedIndex = Math.max(this.selectedIndex - 1, -1);
                    this.updateSelection(items);
                } else if (e.key === 'Enter' && this.selectedIndex >= 0) {
                    e.preventDefault();
                    this.insertSuggestion(this.suggestions[this.selectedIndex].text);
                } else if (e.key === 'Escape') {
                    this.hide();
                }
            }

            updateSelection(items) {
                items.forEach((item, index) => {
                    item.classList.toggle('selected', index === this.selectedIndex);
                });
                if (this.selectedIndex >= 0) {
                    items[this.selectedIndex].scrollIntoView({ block: 'nearest' });
                }
            }

            insertSuggestion(text) {
                const cursorPos = this.textarea.selectionStart;
                const value = this.textarea.value;
                const beforeCursor = value.substring(0, cursorPos);
                const afterCursor = value.substring(cursorPos);
                const words = beforeCursor.split(/\s+/);
                words.pop();
                const newValue = words.join(' ') + (words.length > 0 ? ' ' : '') + text + ' ' + afterCursor;
                this.textarea.value = newValue;
                const newPos = newValue.length - afterCursor.length;
                this.textarea.selectionStart = this.textarea.selectionEnd = newPos;
                this.hide();
                this.textarea.focus();
            }
        }

        // Auto-close brackets and quotes
        const sqlInput = document.getElementById('sql-input');
        const autocomplete = new SQLAutocomplete(sqlInput, dbManager);

        sqlInput.addEventListener('keydown', (e) => {
            const start = sqlInput.selectionStart;
            const end = sqlInput.selectionEnd;
            const value = sqlInput.value;
            
            const pairs = {
                '(': ')',
                '"': '"',
                "'": "'"
            };
            
            if (pairs[e.key] && start === end) {
                e.preventDefault();
                const closing = pairs[e.key];
                sqlInput.value = value.substring(0, start) + e.key + closing + value.substring(end);
                sqlInput.selectionStart = sqlInput.selectionEnd = start + 1;
            }
        });

        // UI Elements
        const executeBtn = document.getElementById('execute-btn');
        const clearBtn = document.getElementById('clear-btn');
        const formatBtn = document.getElementById('format-btn');
        const resetDbBtn = document.getElementById('reset-db-btn');
        const sqlOutput = document.getElementById('sql-output');
        const dbOverview = document.getElementById('db-overview');
        const dbSelect = document.getElementById('db-select');
        const currentDbBadge = document.getElementById('current-db-badge');

        // Execute SQL
        executeBtn.addEventListener('click', () => {
            const sql = sqlInput.value.trim();
            if (!sql) {
                sqlOutput.innerHTML = '<span class="text-yellow-600 dark:text-yellow-400">‚ö† Bitte gib einen SQL-Befehl ein</span>';
                return;
            }

            const statements = sql.split(';').filter(s => s.trim());
            let outputs = [];

            statements.forEach(statement => {
                const result = dbManager.executeSQL(statement);
                if (result.success) {
                    if (result.data) {
                        // Display table
                        let html = `<div class="text-green-600 dark:text-green-400 mb-2">‚úì ${result.message}</div>`;
                        if (result.data.length > 0) {
                            html += '<div class="overflow-x-auto"><table class="sql-table">';
                            html += '<thead><tr>';
                            result.columns.forEach(col => {
                                html += `<th>${col}</th>`;
                            });
                            html += '</tr></thead><tbody>';
                            result.data.forEach(row => {
                                html += '<tr>';
                                result.columns.forEach(col => {
                                    html += `<td>${row[col] !== undefined ? row[col] : ''}</td>`;
                                });
                                html += '</tr>';
                            });
                            html += '</tbody></table></div>';
                        } else {
                            html += '<div class="text-gray-500 dark:text-gray-400 mt-2">Keine Datens√§tze gefunden</div>';
                        }
                        outputs.push(html);
                    } else {
                        outputs.push(`<div class="text-green-600 dark:text-green-400">‚úì ${result.message}</div>`);
                    }
                } else {
                    outputs.push(`<div class="text-red-600 dark:text-red-400">‚úó Fehler: ${result.message}</div>`);
                }
            });

            sqlOutput.innerHTML = outputs.join('<div class="border-t border-gray-300 dark:border-gray-600 my-3"></div>');
            updateDbOverview();
            updateDbSelect();
        });

        // Clear input
        clearBtn.addEventListener('click', () => {
            sqlInput.value = '';
            sqlInput.focus();
        });

        // Format SQL
        formatBtn.addEventListener('click', () => {
            let sql = sqlInput.value.trim();
            
            // Simple SQL formatter
            sql = sql.replace(/\s+/g, ' '); // Normalize whitespace
            sql = sql.replace(/\s*,\s*/g, ',\n    '); // Commas on new lines
            sql = sql.replace(/\s+(FROM|WHERE|SET|VALUES|ORDER BY|LIMIT)\s+/gi, '\n$1 ');
            sql = sql.replace(/\(\s*/g, '(\n    ');
            sql = sql.replace(/\s*\)/g, '\n)');
            
            // Uppercase keywords
            const keywords = ['SELECT', 'FROM', 'WHERE', 'INSERT', 'INTO', 'VALUES', 'UPDATE', 'SET', 
                            'DELETE', 'CREATE', 'TABLE', 'DATABASE', 'DROP', 'ALTER', 'PRIMARY', 'KEY',
                            'NOT', 'NULL', 'INTEGER', 'TEXT', 'VARCHAR', 'REAL', 'USE', 'AND', 'OR'];
            keywords.forEach(kw => {
                const regex = new RegExp(`\\b${kw}\\b`, 'gi');
                sql = sql.replace(regex, kw);
            });
            
            sqlInput.value = sql;
        });

        // Reset database
        resetDbBtn.addEventListener('click', () => {
            if (confirm('M√∂chtest du wirklich ALLE Datenbanken l√∂schen? Dies kann nicht r√ºckg√§ngig gemacht werden!')) {
                dbManager.reset();
                sqlOutput.innerHTML = '<span class="text-green-600 dark:text-green-400">‚úì Alle Datenbanken wurden zur√ºckgesetzt</span>';
                updateDbOverview();
                updateDbSelect();
            }
        });

        // Example buttons
        document.querySelectorAll('.example-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const sql = btn.getAttribute('data-sql');
                sqlInput.value = sql;
                sqlInput.focus();
            });
        });

        // Database selector
        dbSelect.addEventListener('change', () => {
            const dbName = dbSelect.value;
            if (dbName) {
                const result = dbManager.executeSQL(`USE ${dbName}`);
                if (result.success) {
                    sqlOutput.innerHTML = `<span class="text-green-600 dark:text-green-400">‚úì ${result.message}</span>`;
                    updateDbOverview();
                }
            }
        });

        // Update database overview
        function updateDbOverview() {
            const overview = dbManager.getOverview();
            
            if (overview.length === 0) {
                dbOverview.innerHTML = '<span class="text-gray-500 dark:text-gray-400">Keine Datenbanken vorhanden</span>';
                currentDbBadge.classList.add('hidden');
                return;
            }

            let html = '';
            overview.forEach(db => {
                const isActive = db.name === dbManager.currentDatabase;
                html += `<div class="mb-4 pb-4 border-b border-gray-300 dark:border-gray-600 last:border-b-0">`;
                html += `<h4 class="font-semibold text-lg mb-2 flex items-center">`;
                html += `<span class="material-icons mr-2 text-blue-500">storage</span>`;
                html += `${db.name}`;
                if (isActive) {
                    html += ` <span class="ml-2 text-xs px-2 py-1 bg-blue-500 text-white rounded">Aktiv</span>`;
                }
                html += `</h4>`;
                
                if (db.tables.length === 0) {
                    html += `<div class="ml-8 text-sm text-gray-500 dark:text-gray-400">Keine Tabellen</div>`;
                } else {
                    db.tables.forEach(table => {
                        html += `<div class="ml-8 mb-2">`;
                        html += `<div class="flex items-center text-sm">`;
                        html += `<span class="material-icons text-sm mr-1 text-green-500">table_chart</span>`;
                        html += `<span class="font-mono font-semibold">${table.name}</span>`;
                        html += `<span class="ml-2 text-xs text-gray-500 dark:text-gray-400">(${table.rowCount} Zeilen)</span>`;
                        html += `</div>`;
                        html += `<div class="ml-6 text-xs text-gray-600 dark:text-gray-400">`;
                        html += `Spalten: ${table.columns.join(', ')}`;
                        html += `</div>`;
                        html += `</div>`;
                    });
                }
                html += `</div>`;
            });

            dbOverview.innerHTML = html;

            // Update badge
            if (dbManager.currentDatabase) {
                currentDbBadge.textContent = dbManager.currentDatabase;
                currentDbBadge.classList.remove('hidden');
            } else {
                currentDbBadge.classList.add('hidden');
            }
        }

        // Update database selector
        function updateDbSelect() {
            const databases = dbManager.getAllDatabases();
            dbSelect.innerHTML = '<option value="">Keine Datenbank ausgew√§hlt</option>';
            
            databases.forEach(dbName => {
                const option = document.createElement('option');
                option.value = dbName;
                option.textContent = dbName;
                if (dbName === dbManager.currentDatabase) {
                    option.selected = true;
                }
                dbSelect.appendChild(option);
            });
        }

        // Initialize
        updateDbOverview();
        updateDbSelect();
        
        // Back to top button
        const backToTopButton = document.getElementById('back-to-top');
        if (backToTopButton) {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopButton.classList.remove('opacity-0', 'invisible');
                    backToTopButton.classList.add('opacity-100', 'visible');
                } else {
                    backToTopButton.classList.add('opacity-0', 'invisible');
                    backToTopButton.classList.remove('opacity-100', 'visible');
                }
            });

            backToTopButton.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }
    </script>
    
    <!-- "Zur√ºck nach oben" Button -->
    <div class="fixed bottom-8 right-8">
        <button id="back-to-top" class="opacity-0 invisible w-12 h-12 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center text-white shadow-lg transition-all hover:shadow-xl">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
            </svg>
        </button>
    </div>
</body>
</html>
